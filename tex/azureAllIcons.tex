
% Copyright Glen Newton glen.newton@gmail.com
%
\documentclass[12pt]{article}
\usepackage{imakeidx}
\usepackage{hyperref}
\usepackage[hyphenbreaks]{breakurl}
\usepackage[most]{tcolorbox}
%\usepackage{savetrees}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{multicol}
\usepackage{seqsplit}
\usepackage{xcolor}
\usepackage{etoolbox}
\usepackage{tocloft}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{tabularx}
\usepackage[export]{adjustbox}
\usepackage{multicol}

\usepackage[inner=10mm,outer=10mm]{geometry}


%\usepackage{../sty/azureicons} 

\graphicspath{{../icons_tex/}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{\LaTeX\ Style for Azure Icons}
\author{Glen Newton \\\texttt{\href{mailto:glen.newton@gmail.com}{glen.newton@gmail.com}}}

\date{\today}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Change below lines to change look of document %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{fancy}
\fancyhf{}
\rfoot{\hyperref[index]{General Index}}
\cfoot{\hyperref[macros]{Macro Index}}
\lfoot{\hyperref[toc]{TOC}}

\rhead{Page \thepage}
\chead{\href{https://github.com/gnewton/azureArchIcons2LaTeX}{azureArchIcons2LaTeX}}

\newcommand{\iconsize}{1cm}
\newcommand{\entrySpacing}{2mm}
\newcommand{\minipagespacing}{8cm}
%\renewcommand{\familydefault}{\sfdefault}

%% Arch and Res sections start/end
\newcommand{\archStart}{\section{Services}\begin{multicols}{2}\footnotesize}
\newcommand{\archEnd}{\end{multicols}\clearpage}
\newcommand{\resStart}{\newpage\section{Resources}\begin{multicols}{2}\footnotesize}
\newcommand{\resEnd}{\end{multicols}\clearpage}

%% Command used for each icon entry
%\newcommand{\gxs}[5]{\vcenteredinclude{#2}{\hspace{3mm} \begin{minipage}{\minipagespacing}{\bf \small{#1}}\\ {\footnotesize \tt \seqsplit{#3}} \\\tt Macro:\seqsplit{#4}\index[macros]{#4 (#5)} \end{minipage}}\vspace{\vspacing}\newline}

% 1 English name
% 2 graphic
% 3 PDF file (printed TeX)
% 4 Macro name
% 5 Group
\newcommand{\gxs}[5]{
\noindent\begin{tabularx}{9cm}{p{12mm}p{7.8cm}}
               {#2}& 
               #1\index{#1 (#5)}\newline
               \texttt{#3}\newline
               Macro: {\textbackslash}#4 \index[macros]{#4 (#5)}\newline \\
\end{tabularx}
\vspace{\entrySpacing}
}

%% From: https://tex.stackexchange.com/a/847
\hypersetup{
    colorlinks,
    linkcolor={red!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Do not change rest of preamble (below this line) unless you know what
%% you are doing %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% From: https://codepunk.io/change-the-background-color-of-a-blockquote-in-latex-2/
\definecolor{block-gray}{gray}{.75}
\newtcolorbox{blockquote}{colback=block-gray,grow to right by=-1mm,grow to left by=-1mm,boxrule=0pt,boxsep=0pt,breakable}

\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}

\makeatletter
\appto{\endmulticols}{\@doendpe}
\makeatother

%% Ref to index: From https://tex.stackexchange.com/questions/182710/how-to-reference-the-index
\makeindex[intoc,title={Index: General\label{index}}]
\makeindex[name=macros, intoc,title={Index: \LaTeX \ \ Macros\label{macros}}]

%% "Too many open files" problem: From: https://stackoverflow.com/questions/1715677/error-too-many-open-files-in-pdflatex/1720556#1720556
\let\mypdfximage\pdfximage
\def\pdfximage{\immediate\mypdfximage}

 \newcommand{\vcenteredinclude}[1]{\begingroup
   \setbox0=\hbox{#1}%
   \parbox[t]{\wd0}{\box0}\endgroup}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\maketitle
\tableofcontents\label{toc}
%\clearpage
\noindent\makebox[\linewidth]{\rule{\paperwidth}{0.4pt}}

%%%%%%
\section{What is this?}
\LaTeX\ style (\texttt{awsicons.sty}) which allows you to use the \href{https://aws.amazon.com/architecture/icons/}{AWS architectural icons} in your \LaTeX\  documents.

\vspace{3mm}

%\noindent The AWS SVG icons are converted to {\LaTeX}--compatible PDF form using \href{https://inkscape.org/}{Inkscape} \texttt{\inkscapeVersion} using the purpose--written Go program \href{https://github.com/gnewton/awsArchIcons2LaTeX/aws2tex}{aws2tex}. 

\noindent This Go program, \texttt{aws2tex}, creates:
\begin{itemize}
\item \texttt{awsicons.sty} file
\item \LaTeX--compatible PDF versions of icons (and written to the \texttt{icons\_tex} directory, using Inkscape).
\item This document, which is to illustrate as well as index these icons and their corresponding \LaTeX\ \  macros.
  \newline
  \textbf{NB:} Not all icons are converted:
  \begin{itemize}
  \item For \textit{Resources}, only the \texttt{\_Light} versions. The \texttt{\_Dark} are omitted.
  \item For \textit{Services}, only the \texttt{\_64} versions. The lower resolution \texttt{\_16,\_32,\_48} are omitted.
  \end{itemize}
For instructions on how to generate this document with \textit{all} icons, please see the instructions in the \href{https://github.com/gnewton/awsArchIcons2LaTeX}{README.md} at the github repo.\\
This document is: \url{https://github.com/gnewton/awsArchIcons2LaTeX/awsAllIcons.pdf}
\end{itemize}
This document also includes hyperlinks to Google searches of the titles of each icon.


%%%%%%
\section{How to use it?}
There are two parts:
\begin{enumerate}
\item \texttt{awsicons.sty} file
\item directory with all of the icons rendered into \LaTeX\ compatible form (in the repo, this is: \texttt{icons\_tex}).
\end{enumerate}
All you need to do is use the package to your \LaTeX\ document using \texttt{{\textbackslash}usepackage} (after having added the \texttt{awsicons.sty} file to where \LaTeX\ can see it, or put it in the same directory as your document) AND add the directory containing all the generated icons to the \texttt{{\textbackslash}graphicspath\{...\}}.\\

\noindent For example:
\vspace{4mm}

\begin{blockquote}
\begin{verbatim}
% preamble
\usepackage{awsicons} 
\graphicspath{../icons_tex/}
% after \begin{document}
Here is a 1cm API Gateway:
\RAPIGatewayEndpoint{1cm}
Here is a 3cm Lambda function:
\RLambdaLambdaFunc{3cm}

\end{verbatim}
\end{blockquote}

\noindent Resulting in:\\
\begin{blockquote}
Here is a 1cm API Gateway:
%\RAPIGatewayEndpoint{1cm}
Here is a 3cm Lambda function:
%\RLambdaLambdaFunc{3cm}

\end{blockquote}

[Without the gray background]
    
%%%%%%
\subsection{Examples}
There are more complex examples in the \href{https://github.com/gnewton/awsArchIcons2LaTeX/tree/main/examples}{examples} directory, including one which recreates an AWS Architecture blog diagram.

\begin{itemize}
\item \href{https://github.com/gnewton/awsArchIcons2LaTeX/blob/main/examples/simple.pdf}{Simple example}
\item AWS Architecture blog diagram: \textit{\href{https://github.com/gnewton/awsArchIcons2LaTeX/blob/main/examples/Data-pipeline-Grov-Technologies.pdf}{Building a Controlled Environment Agriculture Platform}\footnote{\url{https://aws.amazon.com/blogs/architecture/building-a-controlled-environment-agriculture-platform/}}}, by Ashu Joshi, 2020.12.22.
\end{itemize}
  
\section{Sources}
The AWS Architecture icons used here are from \url{https://aws.amazon.com/architecture/icons/}.\\
%
%The specific assets package used: \href{https://d1.awsstatic.com/webteam/architecture-icons/Q32020/\assetZipFile}{\assetZipFileSplit}
%The specific assets package used: {\sloppy \href{https://d1.awsstatic.com/webteam/architecture-icons/Q32020/}{\assetZipFile}}

\vspace{3cm}
\noindent \copyright\ Glen Newton 2020\\
Icons in this document (I believe) are: \ \copyright\ Amazon Web Services (AWS)
\vspace{5mm}

\setlength{\parindent}{0pt}

\begin{multicols}{2}\footnotesize
%%%%%%%%%%%%% ICON CONTENT: generated by azure2tex:
\input{icons.tex}
\end{multicols}\clearpage

%%%%%%%%%%%%% INDEXES
\normalsize

\appendix
\section{Mapping of icon names to macros names}
In order to have reasonably short macro names, the following mappings have been made by \texttt{aws2tex}, being careful not to introduce any naming collisions.
In addition, \LaTeX\ macros cannot contain numbers, so all numbers have been mapped to words, i.e. 1 $\rightarrow$ One, 5 $\rightarrow$ Five, etc.
The below mappings are applied in order, followed by the number mappings.
{\tiny
\begin{multicols}{3}
  \begin{enumerate}
  \item example
  \end{enumerate}
\end{multicols}
}

\printindex
\printindex[macros]

\end{document}
